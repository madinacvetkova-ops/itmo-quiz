<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–¢—ã ‚Äî –∏–Ω–∂–µ–Ω–µ—Ä –ö–¢–£?</title>

<style>
:root {
  --itmo-blue: #0039A6;
}

body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #fff;
  color: #000;
  text-align: center;
}

.screen {
  display: none;
  padding: 20px;
}

.active {
  display: block;
}

h1 {
  color: var(--itmo-blue);
}

button {
  width: 100%;
  max-width: 320px;
  padding: 15px;
  margin: 10px auto;
  font-size: 16px;
  border: 2px solid var(--itmo-blue);
  background: #fff;
  color: var(--itmo-blue);
  cursor: pointer;
}

button:active {
  background: var(--itmo-blue);
  color: #fff;
}

.progress {
  font-size: 14px;
  margin-bottom: 10px;
  color: #555;
}

svg {
  width: 100%;
  max-width: 320px;
  margin: 20px auto;
}

.path {
  stroke: #999;
  stroke-width: 6;
  fill: none;
}

.path.correct {
  stroke: var(--itmo-blue);
}

table {
  width: 100%;
  max-width: 320px;
  margin: 10px auto;
  border-collapse: collapse;
}

td, th {
  border: 1px solid #ccc;
  padding: 6px;
  font-size: 14px;
}
</style>
</head>

<body>

<!-- –°—Ç–∞—Ä—Ç -->
<div class="screen active" id="start">
  <h1>–¢—ã ‚Äî –∏–Ω–∂–µ–Ω–µ—Ä –ö–¢–£?</h1>
  <p><b>–ú–µ–≥–∞—Ñ–∞–∫—É–ª—å—Ç–µ—Ç –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</b></p>
  <button onclick="startGame()">–ù–∞—á–∞—Ç—å</button>
</div>

<!-- –ó–∞–¥–∞—á–∞ 1 -->
<div class="screen" id="q1">
  <div class="progress">–ó–∞–¥–∞—á–∞ 1 –∏–∑ 3</div>
  <h2>üß≠ –ù–∞–π–¥–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø—É—Ç—å</h2>
  <p>–ö–∞–∫–æ–π –º–∞—Ä—à—Ä—É—Ç —Å–∞–º—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π?</p>

  <svg viewBox="0 0 200 200">
    <circle cx="30" cy="170" r="10" fill="black"/>
    <text x="10" y="190" font-size="12">ü§ñ</text>

    <circle cx="170" cy="30" r="10" fill="black"/>
    <text x="155" y="20" font-size="12">üß™</text>

    <path d="M30 170 L170 30" class="path correct" onclick="answer(true,this)"/>
    <path d="M30 170 L30 30 L170 30" class="path" onclick="answer(false,this)"/>
    <path d="M30 170 L170 170 L170 30" class="path" onclick="answer(false,this)"/>
  </svg>
</div>

<!-- –ó–∞–¥–∞—á–∞ 2 -->
<div class="screen" id="q2">
  <div class="progress">–ó–∞–¥–∞—á–∞ 2 –∏–∑ 3</div>
  <h2>üß† –£–º–Ω—ã–π —Å–µ–Ω—Å–æ—Ä</h2>
  <p>–ö–æ–≥–¥–∞ —Ä–æ–±–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è?</p>

  <button onclick="answer(false)">–µ—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ &gt; 30 —Å–º</button>
  <button onclick="answer(true)">–µ—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ &lt; 30 —Å–º</button>
  <button onclick="answer(false)">–µ—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ = 100 —Å–º</button>
</div>

<!-- –ó–∞–¥–∞—á–∞ 3 -->
<div class="screen" id="q3">
  <div class="progress">–ó–∞–¥–∞—á–∞ 3 –∏–∑ 3</div>
  <h2>ü§ñ –ß–µ–ª–æ–≤–µ–∫ –∏–ª–∏ –∞–ª–≥–æ—Ä–∏—Ç–º?</h2>
  <p>–ö—Ç–æ –ª—É—á—à–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç 200 —Å—Ç—É–¥–µ–Ω—Ç–æ–≤?</p>

  <button onclick="answer(false)">–ß–µ–ª–æ–≤–µ–∫</button>
  <button onclick="answer(true)">–ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</button>
  <button onclick="answer(false)">–°–ª—É—á–∞–π–Ω–æ</button>
</div>

<!-- –§–∏–Ω–∞–ª -->
<div class="screen" id="finish">
  <h1 id="resultTitle"></h1>
  <p id="resultText"></p>

  <h3>üèÜ –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤</h3>
  <table id="scores"></table>

  <p style="margin-top:10px;font-size:14px;">
    –ü—Ä–æ—à–ª–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤: <span id="analytics"></span>
  </p>
</div>

<script>
let step = 0;
let score = 0;
let completed = Number(localStorage.getItem("completed") || 0);

const screens = ["start","q1","q2","q3","finish"];

function startGame() {
  show(1);
}

function show(n) {
  document.getElementById(screens[step]).classList.remove("active");
  step = n;
  document.getElementById(screens[step]).classList.add("active");
}

function answer(correct, el) {
  if (el) el.classList.add("correct");
  if (correct) score++;
  setTimeout(() => {
    if (step < 4) show(step + 1);
    if (step === 3) finish();
  }, 400);
}

function finish() {
  completed++;
  localStorage.setItem("completed", completed);

  const title = document.getElementById("resultTitle");
  const text = document.getElementById("resultText");

  if (score === 3) {
    title.innerText = "üéì –¢—ã ‚Äî —Å—Ç—É–¥–µ–Ω—Ç –ö–¢–£!";
    text.innerText = "–¢—ã –º—ã—Å–ª–∏—à—å –∫–∞–∫ –∏–Ω–∂–µ–Ω–µ—Ä –±—É–¥—É—â–µ–≥–æ.";
  } else if (score === 2) {
    title.innerText = "üöÄ –û—Ç–ª–∏—á–Ω—ã–π —Å—Ç–∞—Ä—Ç!";
    text.innerText = "–¢–µ–±–µ —Ç–æ—á–Ω–æ —Å—é–¥–∞.";
  } else {
    title.innerText = "üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!";
    text.innerText = "–í—Å–µ–º—É –Ω–∞—É—á–∏–º –Ω–∞ –ö–¢–£.";
  }

  saveScore();
  showScores();
  document.getElementById("analytics").innerText = completed;
}

function saveScore() {
  let list = JSON.parse(localStorage.getItem("scores") || "[]");
  list.push({score, date: new Date().toLocaleDateString()});
  list = list.slice(-5);
  localStorage.setItem("scores", JSON.stringify(list));
}

function showScores() {
  const table = document.getElementById("scores");
  const list = JSON.parse(localStorage.getItem("scores") || "[]");
  table.innerHTML = "<tr><th>–ë–∞–ª–ª—ã</th><th>–î–∞—Ç–∞</th></tr>";
  list.reverse().forEach(r => {
    table.innerHTML += `<tr><td>${r.score}/3</td><td>${r.date}</td></tr>`;
  });
}
</script>

</body>
</html>
