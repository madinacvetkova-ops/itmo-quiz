<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ò–Ω–∂–µ–Ω–µ—Ä –ö–¢–£ ‚Äî ITMO</title>

<style>
:root { --itmo-blue:#0039A6; }

body {
  margin:0;
  font-family:Arial,sans-serif;
  background:#fff;
  color:#000;
}

.wrapper {
  max-width:1200px;
  margin:auto;
  text-align:center;
}

.screen { display:none; padding:20px; }
.active { display:block; }

h1,h2,h3 { color:var(--itmo-blue); }

button {
  padding:12px 18px;
  margin:8px;
  border:2px solid var(--itmo-blue);
  background:#fff;
  color:var(--itmo-blue);
  font-size:16px;
}

button:active {
  background:var(--itmo-blue);
  color:#fff;
}

canvas {
  border:1px solid #ccc;
  margin:10px auto;
  display:block;
}
</style>
</head>

<body>
<div class="wrapper">

<!-- START -->
<div class="screen active" id="start">
<h1>–¢—ã ‚Äî –∏–Ω–∂–µ–Ω–µ—Ä –ö–¢–£?</h1>
<p><b>–ú–µ–≥–∞—Ñ–∞–∫—É–ª—å—Ç–µ—Ç –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</b></p>
<p>–§–∞–∫—É–ª—å—Ç–µ—Ç —Å–∏—Å—Ç–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —Ä–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∏</p>
<button onclick="next()">–ù–∞—á–∞—Ç—å</button>
</div>

<!-- BASIC END -->
<div class="screen" id="basicEnd">
<h2>üéì –¢—ã –ø—Ä–æ—à—ë–ª –±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å!</h2>
<p>–•–æ—á–µ—à—å —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –≤—ã–≥–ª—è–¥—è—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏?</p>
<button onclick="enterAdvanced()">üî• Advanced-—É—Ä–æ–≤–µ–Ω—å</button>
</div>

<!-- ADVANCED 1 -->
<div class="screen" id="adv1">
<h2>üß≠ BFS vs A*</h2>
<p>–°—Ä–∞–≤–Ω–∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏</p>
<canvas id="grid" width="360" height="360"></canvas>
<button onclick="runBFS()">BFS</button>
<button onclick="runAStar()">A*</button>
<button onclick="next()">–î–∞–ª–µ–µ</button>
</div>

<!-- ADVANCED 2 -->
<div class="screen" id="adv2">
<h2>üì° –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞</h2>
<canvas id="signal" width="600" height="250"></canvas>
<button onclick="drawRaw()">–ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞</button>
<button onclick="drawAverage()">–°–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ</button>
<button onclick="drawMedian()">–ú–µ–¥–∏–∞–Ω–Ω—ã–π</button>
<button onclick="next()">–î–∞–ª–µ–µ</button>
</div>

<!-- ADVANCED 3 -->
<div class="screen" id="adv3">
<h2>üß† PID-—Ä–µ–≥—É–ª—è—Ç–æ—Ä</h2>
<p>–í—ã–±–µ—Ä–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∏ –ø–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã</p>
<canvas id="pid" width="600" height="250"></canvas>
<button onclick="runPID(0.2)">–ü–ª–æ—Ö–∏–µ</button>
<button onclick="runPID(0.6)">–°—Ä–µ–¥–Ω–∏–µ</button>
<button onclick="runPID(1.2)">–°—Ç–∞–±–∏–ª—å–Ω—ã–µ</button>
<button onclick="finishAdvanced()">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
</div>

<!-- FINAL -->
<div class="screen" id="finish">
<h1>üî• –¢—ã –≤–∏–¥–µ–ª, –∫–∞–∫ —É—á–∞—Ç—Å—è –∏–Ω–∂–µ–Ω–µ—Ä—ã –ö–¢–£</h1>
<p id="stats"></p>
</div>

</div>

<script>
let step=0;
const screens=[
"start","basicEnd","adv1","adv2","adv3","finish"
];

let analytics={
basic:Number(localStorage.getItem("basic")||0),
advanced:Number(localStorage.getItem("advanced")||0),
advancedEnd:Number(localStorage.getItem("advancedEnd")||0)
};

function next(){
show(step+1);
}

function show(n){
document.getElementById(screens[step]).classList.remove("active");
step=n;
document.getElementById(screens[step]).classList.add("active");
}

analytics.basic++;
localStorage.setItem("basic",analytics.basic);

function enterAdvanced(){
analytics.advanced++;
localStorage.setItem("advanced",analytics.advanced);
next();
}

/* ===== BFS / A* ===== */
const g=document.getElementById("grid").getContext("2d");
const size=10, cell=36;
const start={x:0,y:9}, goal={x:9,y:0};
function drawGrid(v=[]){
g.clearRect(0,0,360,360);
for(let y=0;y<size;y++)
for(let x=0;x<size;x++)
g.strokeRect(x*cell,y*cell,cell,cell);
v.forEach(p=>{
g.fillStyle="#aac";
g.fillRect(p.x*cell,p.y*cell,cell,cell);
});
g.fillStyle="green";
g.fillRect(start.x*cell,start.y*cell,cell,cell);
g.fillStyle="red";
g.fillRect(goal.x*cell,goal.y*cell,cell,cell);
}
function runBFS(){
let q=[start], seen={}, v=[];
let t=setInterval(()=>{
if(!q.length){clearInterval(t);return;}
let p=q.shift(); v.push(p); drawGrid(v);
[[1,0],[-1,0],[0,1],[0,-1]].forEach(d=>{
let nx=p.x+d[0], ny=p.y+d[1], k=nx+","+ny;
if(nx>=0&&ny>=0&&nx<size&&ny<size&&!seen[k]){
seen[k]=1; q.push({x:nx,y:ny});
}});
},80);
}
function runAStar(){
let open=[start], v=[], seen={};
let t=setInterval(()=>{
if(!open.length){clearInterval(t);return;}
open.sort((a,b)=>Math.abs(a.x-goal.x)+Math.abs(a.y-goal.y)-
Math.abs(b.x-goal.x)-Math.abs(b.y-goal.y));
let p=open.shift(); v.push(p); drawGrid(v);
[[1,0],[-1,0],[0,1],[0,-1]].forEach(d=>{
let nx=p.x+d[0], ny=p.y+d[1], k=nx+","+ny;
if(nx>=0&&ny>=0&&nx<size&&ny<size&&!seen[k]){
seen[k]=1; open.push({x:nx,y:ny});
}});
},80);
}
drawGrid();

/* ===== SIGNAL ===== */
const s=document.getElementById("signal").getContext("2d");
let raw=Array.from({length:100},(_,i)=>120+40*Math.sin(i/10)+Math.random()*40);
function draw(data){
s.clearRect(0,0,600,250);
s.beginPath();
data.forEach((v,i)=>s.lineTo(i*6,250-v));
s.stroke();
}
function drawRaw(){draw(raw);}
function drawAverage(){
draw(raw.map((_,i)=>{
let a=raw.slice(Math.max(0,i-3),i+4);
return a.reduce((x,y)=>x+y)/a.length;
}));
}
function drawMedian(){
draw(raw.map((_,i)=>{
let a=raw.slice(Math.max(0,i-3),i+4).sort((a,b)=>a-b);
return a[Math.floor(a.length/2)];
}));
}
drawRaw();

/* ===== PID ===== */
const p=document.getElementById("pid").getContext("2d");
function runPID(k){
let y=125, target=125, v=[];
let t=setInterval(()=>{
let err=target-y;
y+=err*k;
v.push(y);
p.clearRect(0,0,600,250);
p.beginPath();
v.forEach((val,i)=>p.lineTo(i*6,250-val));
p.stroke();
if(v.length>100) clearInterval(t);
},50);
}

function finishAdvanced(){
analytics.advancedEnd++;
localStorage.setItem("advancedEnd",analytics.advancedEnd);
document.getElementById("stats").innerText=
`–ü—Ä–æ—à–ª–∏ –±–∞–∑—É: ${analytics.basic}
–ó–∞—à–ª–∏ –≤ Advanced: ${analytics.advanced}
–ü—Ä–æ—à–ª–∏ Advanced: ${analytics.advancedEnd}`;
show(5);
}
</script>

</body>
</html>
