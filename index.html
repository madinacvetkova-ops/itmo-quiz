<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ò–Ω–∂–µ–Ω–µ—Ä –ö–¢–£ ‚Äî Advanced</title>

<style>
:root { --itmo-blue:#0039A6; }

body {
  margin:0; font-family:Arial,sans-serif;
  background:#fff; color:#000; text-align:center;
}

section {
  padding:20px;
  border-bottom:2px solid #eee;
}

h1,h2 { color:var(--itmo-blue); }

button {
  padding:10px 14px;
  margin:6px;
  border:2px solid var(--itmo-blue);
  background:#fff;
  color:var(--itmo-blue);
  font-size:14px;
}

button:active {
  background:var(--itmo-blue);
  color:#fff;
}

canvas {
  border:1px solid #ccc;
  margin:10px auto;
  display:block;
}
</style>
</head>

<body>

<h1>üî¨ –ò–Ω–∂–µ–Ω–µ—Ä –ö–¢–£ ‚Äî Advanced</h1>
<p>–ú–µ–≥–∞—Ñ–∞–∫—É–ª—å—Ç–µ—Ç –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>

<!-- =================== –ó–ê–î–ê–ß–ê 1 =================== -->
<section>
<h2>üß≠ –ê–ª–≥–æ—Ä–∏—Ç–º—ã –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏</h2>
<p>
ü§ñ ‚Üí üß™ –Ω–∞ —Å–µ—Ç–æ—á–Ω–æ–π –∫–∞—Ä—Ç–µ.<br>
–ü–æ—Å–º–æ—Ç—Ä–∏, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã.
</p>

<canvas id="grid" width="240" height="240"></canvas><br>

<button onclick="runBFS()">–ü–æ–∫–∞–∑–∞—Ç—å BFS</button>
<button onclick="runAStar()">–ü–æ–∫–∞–∑–∞—Ç—å A*</button>

<p><b>–ö–∞–∫–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º –±—ã—Å—Ç—Ä–µ–µ?</b></p>
</section>

<!-- =================== –ó–ê–î–ê–ß–ê 2 =================== -->
<section>
<h2>üì° –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞</h2>
<p>–°–µ–Ω—Å–æ—Ä –ø–µ—Ä–µ–¥–∞—ë—Ç —Å–∏–≥–Ω–∞–ª —Å —à—É–º–æ–º.</p>

<canvas id="signal" width="300" height="150"></canvas><br>

<button onclick="drawRaw()">–ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞</button>
<button onclick="drawAverage()">–°–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ</button>
<button onclick="drawMedian()">–ú–µ–¥–∏–∞–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä</button>

<p><b>–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –ª—É—á—à–µ —Å–≥–ª–∞–∂–∏–≤–∞–µ—Ç —à—É–º?</b></p>
</section>

<script>
/* ---------- –ó–ê–î–ê–ß–ê 1: BFS vs A* ---------- */
const g = document.getElementById("grid").getContext("2d");
const size = 8;
const cell = 30;

const start = {x:0,y:7};
const goal = {x:7,y:0};

const walls = [
  {x:3,y:1},{x:3,y:2},{x:3,y:3},
  {x:5,y:4},{x:6,y:4}
];

function drawGrid(visited=[]) {
  g.clearRect(0,0,240,240);
  for(let y=0;y<size;y++){
    for(let x=0;x<size;x++){
      g.strokeRect(x*cell,y*cell,cell,cell);
    }
  }
  walls.forEach(w=>{
    g.fillRect(w.x*cell,w.y*cell,cell,cell);
  });
  visited.forEach(v=>{
    g.fillStyle="#99b";
    g.fillRect(v.x*cell,v.y*cell,cell,cell);
  });
  g.fillStyle="green";
  g.fillRect(start.x*cell,start.y*cell,cell,cell);
  g.fillStyle="red";
  g.fillRect(goal.x*cell,goal.y*cell,cell,cell);
}

function runBFS(){
  let visited=[];
  let q=[start];
  let seen={};
  let i=0;
  let t=setInterval(()=>{
    if(!q.length){clearInterval(t);return;}
    let v=q.shift();
    visited.push(v);
    drawGrid(visited);
    i++;
    [[1,0],[-1,0],[0,1],[0,-1]].forEach(d=>{
      let nx=v.x+d[0], ny=v.y+d[1];
      let k=nx+","+ny;
      if(nx>=0&&ny>=0&&nx<size&&ny<size&&!seen[k]
         && !walls.find(w=>w.x===nx&&w.y===ny)){
        seen[k]=1; q.push({x:nx,y:ny});
      }
    });
  },120);
}

function runAStar(){
  let visited=[];
  let open=[start];
  let seen={};
  let t=setInterval(()=>{
    if(!open.length){clearInterval(t);return;}
    open.sort((a,b)=>
      (Math.abs(a.x-goal.x)+Math.abs(a.y-goal.y))-
      (Math.abs(b.x-goal.x)+Math.abs(b.y-goal.y))
    );
    let v=open.shift();
    visited.push(v);
    drawGrid(visited);
    [[1,0],[-1,0],[0,1],[0,-1]].forEach(d=>{
      let nx=v.x+d[0], ny=v.y+d[1];
      let k=nx+","+ny;
      if(nx>=0&&ny>=0&&nx<size&&ny<size&&!seen[k]
         && !walls.find(w=>w.x===nx&&w.y===ny)){
        seen[k]=1; open.push({x:nx,y:ny});
      }
    });
  },120);
}

drawGrid();

/* ---------- –ó–ê–î–ê–ß–ê 2: –§–ò–õ–¨–¢–†–ê–¶–ò–Ø ---------- */
const c = document.getElementById("signal").getContext("2d");
let raw = Array.from({length:50},
  (_,i)=>50+20*Math.sin(i/5)+Math.random()*30);

function draw(data){
  c.clearRect(0,0,300,150);
  c.beginPath();
  data.forEach((v,i)=>{
    c.lineTo(i*6,150-v);
  });
  c.stroke();
}

function drawRaw(){ draw(raw); }

function drawAverage(){
  let f = raw.map((_,i)=>{
    let s=0,cnt=0;
    for(let j=-2;j<=2;j++){
      if(raw[i+j]){s+=raw[i+j];cnt++;}
    }
    return s/cnt;
  });
  draw(f);
}

function drawMedian(){
  let f = raw.map((_,i)=>{
    let arr=[];
    for(let j=-2;j<=2;j++){
      if(raw[i+j]) arr.push(raw[i+j]);
    }
    arr.sort((a,b)=>a-b);
    return arr[Math.floor(arr.length/2)];
  });
  draw(f);
}

drawRaw();
</script>

</body>
</html>
